<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rotor: Rationale</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="extra.css" rel="stylesheet" type="text/css" />
</head>
<body>
<a href="http://www.reactivemanifesto.org/"> <img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000" src="//d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-white-right.png"> </a>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rotor
   </div>
   <div id="projectbrief">Event loop friendly C++ actor micro-framework</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2home_2b_2development_2cpp_2cpp-rotor_2docs_2Rationale.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Rationale</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There are few main actor frameworks in C++ world: <a href="https://github.com/Stiffstream/sobjectizer">sobjectizer</a>, <a href="https://actor-framework.org/">c++ actor framework</a> and <a href="https://www.state-machine.com/qpcpp/">QP/C++</a>. There is major a issue with them, as they offer some actor runtime, which has <em>own</em> rules for execution, which user have to comply. On the other hand there are a lot of third-party libraries, which often have other runtime. As the result, the seamless usage of them together becomes hard or even impossible, or it might come at rather high costs (i.e. running each environment /runtime on it's own thread). In the other words they are <b>intrusive</b>.</p>
<p>Their intrusiveness makes the frameworks same sort unfriendly for cooperation with other C++ libraries. However, why they are intrusive? To my opinion, this happens because the frameworks need, first, <em>timers</em> and, second, some inter-thread message passing and actor execution environment. So, for the frameworks own intrusive runtimes were developed.</p>
<p><a href="https://github.com/basiliscos/cpp-rotor">rotor</a> was designed with the opposite approach: let timeouts and inter-thread communications be handled by external libraries (loops), while <a href="https://github.com/basiliscos/cpp-rotor">rotor</a> responsibility is just internal message delivery and a thin timers abstraction layer; everything beyond that is just messaging rules. As the result <a href="https://github.com/basiliscos/cpp-rotor">rotor</a> is quite lightweight micro-framework; the main infrastructure units of execution (aka <code>supervisors</code>) are tightly coupled to the concrete event loop. However the last point shouldn't be a big issue, as soon as the <a href="https://github.com/basiliscos/cpp-rotor">rotor</a> <em>messaging interface</em> does not depend on underlying loop. In <a href="https://github.com/basiliscos/cpp-rotor">rotor</a> messages can be passed between actors running on different threads or even actors running on different event loops, as <em>soon as underlying supervisors/loops support that</em>. This makes it possible to scale <a href="https://github.com/basiliscos/cpp-rotor">rotor</a> across different event loops within the same program.</p>
<p>The messaging rules and <b>asynchronous and composeable lifetime</b> of actors, makes it possible to create <a href="https://en.wikipedia.org/wiki/Erlang_(programming_language)#Supervisor_trees">erlang-like</a> <b>hierarchies of supervisors</b>, i.e. hierarchies of responsibilities. As far as I now neither <a href="https://actor-framework.org/">caf</a> nor <a href="https://github.com/Stiffstream/sobjectizer">sobjectizer</a> have something similar. It is better to familiarize yourself with the original <a href="https://learnyousomeerlang.com/supervisors#supervisor-concepts">erlang supervisors concepts</a> or from my <a href="https://basiliscos.github.io/blog/2019/08/19/cpp-supervisors">article</a> explaining problems of supervisors related to C++ world.</p>
<p>Another design feature of <a href="https://github.com/basiliscos/cpp-rotor">rotor</a> is it's <b>testability</b>: as long as core application logic is I/O-pure, the whole testing scenario is fully deterministic and without event loop. Rotor-based applications should have moderate complexity test-environment setup. This can be achieved via two corner stones: unintrusiveness (feature of <a href="https://github.com/basiliscos/cpp-rotor">rotor</a>) and interface weakly coupling because actors just react on incoming messages (common feature of all actor frameworks).</p>
<p>As the last point, it should be noted, that <a href="https://github.com/Stiffstream/sobjectizer">sobjectizer</a> is not that intrusive as <a href="https://actor-framework.org/">caf</a>, because it supports various <a href="https://stiffstream.com/en/docs/sobjectizer/so_5-5/namespaceso__5_1_1env__infrastructures.html">infrastructures</a> and because there is an additional external module <a href="https://stiffstream.com/en/products/so_5_extra.html">so_5_extra</a>, which already has <a href="https://www.boost.org/doc/libs/release/libs/asio">boost-asio</a> support. The external loop integration is still <a href="https://github.com/eao197/so-5-5/issues/25">non-trivial task</a> compared to <a href="https://github.com/basiliscos/cpp-rotor">rotor</a>, and I'm still not sure whether is is possible to integrate more than one event loop.</p>
<p><a href="https://github.com/basiliscos/cpp-rotor">rotor</a> misses some features of the named frameworks, like messaging overloading control and networking in the exchange for more <em>fine-gained</em> control and <em>lightweightness</em>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
